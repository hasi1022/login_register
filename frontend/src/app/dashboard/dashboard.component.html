<div class="dashboard-container">

<div class="top-buttons">
<button (click)="onLogout()">Logout</button>
<button (click)="create()">Create Invoice</button>
</div>
<!-- Show invoices only if result has data -->
<div *ngIf="result?.message?.length > 0; else noData">

  <h2>All Invoices</h2>

  <div *ngFor="let invoice of result.message" class="invoice-card">

    <h3>Invoice #{{ invoice.invoiceId }}</h3>

    <p><strong>Bill To:</strong> {{ invoice.billTo }}</p>
    <p><strong>Invoice Date:</strong> {{ invoice.invoiceDate | date }}</p>
    <p><strong>Grand Total:</strong> ₹{{ invoice.grandTotal }}</p>
    <button type="button" (click)="populateForm(invoice)" >Update</button>
    <button type="button" (click)="deleteBtn(invoice)" >Delete</button>

    <h4>Items:</h4>
    <table border="1" cellpadding="5" style="border-collapse: collapse;">
      <thead>
        <tr>
          <th>Item Name</th>
          <th>Quantity</th>
          <th>Unit Price</th>
          <th>Subtotal</th>
          <th>GST</th>
          <th>GST amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of invoice.items">
          <td>{{ item.itemName }}</td>
          <td>{{ item.itemQuantity }}</td>
          <td>₹{{ item.itemUnitPrice }}</td>
          <td>₹{{ item.itemSubUnitTotal }}</td>
          <td>{{item.itemGstPer}}%</td>
          <td>₹{{ item.itemGst }}</td>
        </tr>
      </tbody>
    </table>

    <hr>
  </div>

</div>

<ng-template #noData>
  <p>No invoices found.</p>
</ng-template>
@if(err){
    <p>{{err | json}}</p>
}
@if(rePage){
  <p>{{rePage | json}}</p>
}
</div>
